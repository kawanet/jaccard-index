<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: Jaccard</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: Jaccard</h1>

    




<section>

<header>
    
        <h2>Jaccard</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="Jaccard"><span class="type-signature"></span>new Jaccard<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="Jaccard.html">Jaccard</a>}</span></h4>

    



<div class="description">
    Promise-based Jaccard similarity coefficient index calculation framework
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="Jaccard.html">Jaccard</a></span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>#!/usr/bin/env node

var Jaccard = require("jaccard-index");

var logs = {
  "item1": ["user1", "user2"],
  "item2": ["user2", "user3", "user4"],
  "item3": ["user1", "user2", "user5"]
};

var items = Object.keys(logs); // item1, item2, item3

var options = {
  getLog: getLog
};

Jaccard(options).getLinks(items).then(showResult).catch(console.warn);

function getLog(itemId) {
  return Promise.resolve(logs[itemId]); // async
  // return logs[itemId]; // sync
}

function showResult(links) {
  console.log(JSON.stringify(links, null, 2));
  process.exit(0);
}

// Result:
// [
//   {"source": "item1", "target": "item2", "value": 0.25},
//   {"source": "item1", "target": "item3", "value": 0.6666666666666666},
//   {"source": "item2", "target": "item3", "value": 0.2}
// ]</code></pre>



    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id="direction"><span class="type-signature"></span>direction<span class="type-signature"> :boolean</span></h4>




<div class="description">
    Set false when source and target are swappable.
Set true when they have a direction.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">boolean</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>false</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="expire"><span class="type-signature"></span>expire<span class="type-signature"> :number|null</span></h4>




<div class="description">
    Time in millisecond to expire cached results.
Set null to disable the cache feature.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">number</span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>null</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="throttle"><span class="type-signature"></span>throttle<span class="type-signature"> :number|null</span></h4>




<div class="description">
    Concurrency to run data loading and index calculating.
Only single task each allowed per default.
The other tasks would wait to start until the first task completed.
Set null to disable the throttle.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">number</span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>1</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="timeout"><span class="type-signature"></span>timeout<span class="type-signature"> :number|null</span></h4>




<div class="description">
    Timeout in millisecond until receiving a result.
Set null to disable the timeout.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">number</span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>null</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>






        
            
<h4 class="name" id="wait"><span class="type-signature"></span>wait<span class="type-signature"> :number|null</span></h4>




<div class="description">
    Time in millisecond to wait between each calculating iteration to avoid Node process locked.
Set null to disable any additional wait.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">number</span>
|

<span class="param-type">null</span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-default">Default Value:</dt>
    <dd class="tag-default"><ul class="dummy">
            <li>0</li>
        </ul></dd>
    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="cachedIndex"><span class="type-signature"></span>cachedIndex<span class="signature">(sourceItem, targetItem)</span><span class="type-signature"> &rarr; {Promise.&lt;(number|undefined)>}</span></h4>

    



<div class="description">
    returns a Promise for Jaccard index between the pair of items with the built-in cache mechanism.
This calls getIndex() method when the cache not available.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sourceItem</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetItem</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(number|undefined)></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="cachedLog"><span class="type-signature"></span>cachedLog<span class="signature">(itemId)</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h4>

    



<div class="description">
    retrieves a log array with the built-in cache mechanism.
This calls getLog() method when the cache not available.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>itemId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="filter"><span class="type-signature"></span>filter<span class="signature">(index)</span><span class="type-signature"> &rarr; {number|null|any}</span></h4>

    



<div class="description">
    returns a Jaccard index value to be placed at the result.
This does nothing per default.
Override this function to apply a precision or another format.
Return null to ignore the index.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            

            

            <td class="description last">Jaccard index</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>
|

<span class="param-type">null</span>
|

<span class="param-type">any</span>


    </dd>
</dl>

    


    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>jaccard.filter = function(index) {
  return Math.filter(index * 1000) / 1000;
};</code></pre>

    <pre class="prettyprint"><code>jaccard.filter = function(index) {
  return (index > 0.001) ? index : null;
};</code></pre>



        
            

    

    <h4 class="name" id="getIndex"><span class="type-signature"></span>getIndex<span class="signature">(sourceItem, targetItem)</span><span class="type-signature"> &rarr; {Promise.&lt;(number|undefined)>}</span></h4>

    



<div class="description">
    returns a Promise for Jaccard index between the pair of items.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sourceItem</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetItem</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;(number|undefined)></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getItems"><span class="type-signature"></span>getItems<span class="signature">()</span><span class="type-signature"> &rarr; {Array.&lt;string>}</span></h4>

    



<div class="description">
    returns array of all items.
Override this only when needed.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;string></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getLinks"><span class="type-signature"></span>getLinks<span class="signature">(sourceItems<span class="signature-attributes">opt</span>, targetItems<span class="signature-attributes">opt</span>, onLink<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise.&lt;Array>}</span></h4>

    



<div class="description">
    returns an Array of Jaccard index of each links.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sourceItems</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>
|

<span class="param-type">Promise.&lt;Array></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">array of source items</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetItems</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>
|

<span class="param-type">Promise.&lt;Array></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">array of target items</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>onLink</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">function(index, sourceItem, targetItem) {...}</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;Array></span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="getLog"><span class="type-signature"></span>getLog<span class="signature">(itemId)</span><span class="type-signature"> &rarr; {Array.&lt;string>|Promise.&lt;Array>}</span></h4>

    



<div class="description">
    retrieves a log array.
Overriding this method is required before calling getLinks() or getIndex() methods.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>itemId</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;string></span>
|

<span class="param-type">Promise.&lt;Array></span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var fs = require("fs");
var Jaccard = require("jaccard-index");

var jaccard = Jaccard();

jaccard.getLog = getLog;

function getLog(itemId) {
  return new Promise(function(resolve, reject) {
    var file = "test/example/" + itemId + ".txt";
    fs.readFile(file, "utf-8", function(err, text) {
      if (err) return reject(err);
      var data = text.split("\n").filter(function(v) {
        return !!v;
      });
      return resolve(data);
    });
  });
}</code></pre>



        
            

    

    <h4 class="name" id="index"><span class="type-signature"></span>index<span class="signature">(sourceLog, targetLog)</span><span class="type-signature"> &rarr; {number|undefined|Promise.&lt;(number|undefined)>}</span></h4>

    



<div class="description">
    calculates a Jaccard index between a pair of Arrays.
Override this when you need any other index method than Jaccard index.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>sourceLog</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>targetLog</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>

    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>
|

<span class="param-type">undefined</span>
|

<span class="param-type">Promise.&lt;(number|undefined)></span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>var Jaccard = require("jaccard-index");
var jaccard = Jaccard();

var item1 = ["user1", "user2"];
var item2 = ["user2", "user3", "user4"];
var index = jaccard.index(item1, item2);

console.log(index); // => 0.25</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Jaccard.html">Jaccard</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>